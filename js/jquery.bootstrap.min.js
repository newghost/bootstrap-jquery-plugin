/**
* jquery.bootstrap.js
Copyright (c) Kris Zhang <kris.newghost@gmail.com>
License: MIT (https://github.com/newghost/bootstrap-jquery-plugin/blob/master/LICENSE)
*/
String.prototype.format || (String.prototype.format = function () { var t = arguments; return this.replace(/{(\d+)}/g, function (e, o) { return "undefined" != typeof t[o] ? t[o] : e }) }), function (t) { t.fn.dialog = function (e) { var o = this, a = t(o), n = (t(document.body), a.closest(".dialog")), d = "dialog-parent", s = arguments[1], i = arguments[2], r = function () { var e = '<div class="dialog modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close">&times;</button><h4 class="modal-title"></h4></div><div class="modal-body"></div><div class="modal-footer"></div></div></div></div>'; n = t(e), t(document.body).append(n), n.find(".modal-body").append(a) }, l = function (a) { var d = (a || e || {}).buttons || {}, s = n.find(".modal-footer"); s.empty(); var i = d.constructor == Array; for (var r in d) { var l = d[r], c = "", u = "", f = "btn-default", h = ""; if (l.constructor == Object) c = l.id, u = l.text, f = l["class"] || l.classed || f, h = l.click; else { if (i || l.constructor != Function) continue; u = r, h = l } $button = t('<button type="button" class="btn">').addClass(f).html(u), c && $button.attr("id", c), h && !function (t) { $button.click(function () { t.call(o) }) }(h), s.append($button) } s.data("buttons", d) }, c = function () { n.modal("show") }, u = function (t) { n.modal("hide").one("hidden.bs.modal", function () { t && (a.data(d).append(a), n.remove()) }) }; if (e.constructor == Object) { !a.data(d) && a.data(d, a.parent()), n.size() < 1 && r(), l(), t(".modal-title", n).html(e.title || ""); var f = t(".modal-dialog", n).addClass(e.dialogClass || ""); t(".modal-header .close", n).click(function () { var t = e.onClose || u; t.call(o) }), (e["class"] || e.classed) && n.addClass(e["class"] || e.classed), e.autoOpen === !1 && (e.show = !1), e.width && f.width(e.width), e.height && f.height(e.height), n.modal(e) } if ("destroy" == e && u(!0), "close" == e && u(), "open" == e && c(), "option" == e && "buttons" == s) { if (!i) return n.find(".modal-footer").data("buttons"); l({ buttons: i }), c() } return o } }(jQuery), $.messager = function () { var t, e = function (t, e, o, a) { var n = $.messager.model; arguments.length < 2 && (e = t || "", t = "&nbsp;"), $("<div>" + e + "</div>").dialog({ title: t, onClose: function () { $(this).dialog("destroy"), a && a() }, buttons: [{ text: n.ok.text, classed: n.ok.classed || "btn-success", click: function () { $(this).dialog("destroy"), o && o() } }] }) }, o = function (t, e, o, a) { var n = $.messager.model; $("<div>" + e + "</div>").dialog({ title: t, onClose: function () { $(this).dialog("destroy"), a && a() }, buttons: [{ text: n.ok.text, classed: n.ok.classed || "btn-success", click: function () { $(this).dialog("destroy"), o && o() } }, { text: n.cancel.text, classed: n.cancel.classed || "btn-danger", click: function () { $(this).dialog("destroy"), a && a() } }] }) }, a = '<div class="dialog modal fade msg-popup"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-body text-center"></div></div></div></div>', n = function (e) { t || (t = $(a), $("body").append(t)), t.find(".modal-body").html(e), t.modal({ show: !0, backdrop: !1 }), setTimeout(function () { t.modal("hide") }, 1500) }; return { alert: e, popup: n, confirm: o } }(), $.messager.model = { ok: { text: "OK", classed: "btn-success" }, cancel: { text: "Cancel", classed: "btn-danger" } }, function (t) { t.fn.datagrid = function (e, o) { var a = this, n = t(a), d = n.data("config") || {}, s = n.data("rows") || [], i = d.selectedClass || "success", r = d.singleSelect, l = function (e) { var o = d.selectChange, a = d.edit, l = function (e) { var a = t(this), d = a.hasClass(i), l = t("tbody tr", n).index(a), c = s[l] || {}; r && t("tbody tr", n).removeClass(i), a.toggleClass(i), o && o(!d, l, c, a) }; (o || "undefined" != typeof r) && e.click(l); var c = function (e) { var o = t(this), a = o.closest("tr"), d = t("tbody tr", n).index(a), i = s[d] || {}, r = o.attr("name"); r && (i[r] = o.val()) }; a && e.find("input").keyup(c) }, c = function (t, e) { for (var o = "<tr>", a = 0, n = t[0].length; n > a; a++) { var s = t[0][a], i = s.formatter, r = s.field, l = (s.tip, e[r]), c = s.maxlength, u = s.readonly; "undefined" == typeof l && (l = ""), d.edit && (c = c ? ' maxlength="{0}"'.format(s.maxlength) : "", u = u ? ' readonly="readonly"' : "", l = '<input name="{0}" value="{1}" class="form-control"{2}{3}/>'.format(s.field, l, c, u)), l = i ? i(e[r], e) : l, o = o + "<td>" + l + "</td>" } return o += "</tr>" }, u = function (e) { if (o) { var a = d.columns, s = o.rows || o; if (a) { var i = "<tbody>"; if (s) for (var r = 0, u = s.length; u > r; r++)i += c(a, s[r]); i += "</tbody>", t("tbody", n).remove(), n.data("rows", s).append(i), d.edit && n.addClass("edit"), l(t("tbody tr", n)) } } }, f = function () { if (o && "undefined" != typeof o.index) return [o.index]; var e = []; return n.find("tbody tr").each(function (o) { var a = t(this); a.hasClass(i) && e.push(o) }), e }; if (e && e.constructor == Object) { var h = e.columns; if (h) { t("thead", n).size() < 1 && n.append("<thead></thead>"); for (var m = "<tr>", p = 0, v = h[0].length; v > p; p++) { var y = h[0][p]; m += "<th>" + (y.title || "") + "</th>" } m += "</tr>", n.data("config", e), t("thead", n).html(m) } } if ("loadData" == e && u(), "getData" == e) return s; if ("getConfig" == e) return d; if ("getColumns" == e) return d.columns; if ("selectRow" == e) { if ("undefined" == typeof r) return; "number" == typeof o ? (r && n.datagrid("unselectRow"), t("tbody tr", n).eq(o).addClass(i)) : r || t("tbody tr", n).addClass(i) } if ("unselectRow" == e && ("undefined" != typeof o ? t("tbody tr", n).eq(o).removeClass(i) : t("tbody tr", n).removeClass(i)), "updateRow" == e) for (var g = f(), b = o.row, h = d.columns, p = 0, v = g.length; v > p; p++) { var C = g[p]; s && (b = t.extend(s[C], b)); var x = t(c(h, b, d)); "undefined" == typeof o.index && x.addClass(i), t("tbody tr", n).eq(C).after(x).remove(), l(x) } if ("getSelections" == e) { var k = []; return t("tbody tr", n).each(function (e) { t(this).hasClass(i) && k.push(s[e]) }), k } if ("getSelectedIndex" == e) return f(); if ("insertRow" == e) { var w = f()[0], b = o.row; if (("undefined" == typeof w || 0 > w) && (w = s.length), !d || !b) return n; var $ = t("tbody tr", n), x = t(c(d.columns, b, d)), j = $.eq(w); l(x), j.size() ? j.before(x) : t("tbody", n).append(x), s.splice(w, 0, b) } if ("deleteRow" == e) for (var g = "number" == typeof o ? [o] : f(), p = g.length - 1; p > -1; p--) { var w = g[p]; t("tbody tr", n).eq(w).remove(), s.splice(w, 1) } return a } }(jQuery), function (t) { t.fn.tree = function (e, o) { var a = this, n = t(a), d = Array.prototype.push, s = "glyphicon-file", i = "glyphicon-folder-open", r = "glyphicon-folder-close", l = function (t, e, o) { var a = []; !e && a.push('<ul style="display:{0}">'.format("close" == o ? "none" : "block")); for (var n = 0, c = t.length; c > n; n++) { var u = t[n], f = u.children, h = u.id, m = u.state, p = u.attributes; a.push("<li>"); var v = "undefined" == typeof f ? s : "close" == m ? r : i; a.push('<span class="glyphicon {0}"></span> '.format(v)), a.push("<a{1}{2}{3}>{0}</a>".format(u.text, f ? " class='tree-node'" : "", h ? " data-id='{0}'".format(h) : "", p ? " data-attr='{0}'".format(JSON.stringify(p)) : "")), f && d.apply(a, l(f, !1, m)), a.push("</li>") } return !e && a.push("</ul>"), a }, c = function () { t("span.glyphicon-folder-open, span.glyphicon-folder-close", n).click(function (e) { var o = t(this), a = o.closest("li").children("ul"); o.hasClass(r) ? (o.removeClass(r).addClass(i), a.show()) : (o.removeClass(i).addClass(r), a.hide()) }) }; if (e && e.constructor == Object) { var u = e.data; if (u && u.constructor == Array) { var f = l(u, !0); n.html(f.join("")), n.data("config", e), c() } var h = e.onClick; h && t("li>a", n).click(function () { var e = t(this); attrs = e.attr("data-attr"), h.call(a, { id: e.attr("data-id"), attributes: attrs ? JSON.parse(attrs) : {}, text: e.text() }, e) }) } return a } }(jQuery);